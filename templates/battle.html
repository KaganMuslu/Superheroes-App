{% extends 'base.html' %} {% block style %}
<title>Superheroes App | Savaş</title>
{% endblock style %} {% block body %}

<div style="margin-top: 15px" class="container text-center">
  <div class="row justify-content-center">
    <div class="col-1"></div>

    <div class="col-10 justify-content-center">
      <h2>Ekip Seçim Aşaması</h2>
      <h5>Savaşa Katılacak 5 karakter seçin</h5>
      <a id="showButton" style="display: none; margin-left: 25%; margin-right: 25%;" class="btn btn-danger">Savaşa Git!</a>
      <br />

      {% if not heroes %}
        <a href="/first_five" class="btn btn-primary">İlk 5 Kahramanını Al!</a>
      {% else %}

        <table class="table table-sm table-success table-striped">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Image</th>
              <th scope="col">Intelligence</th>
              <th scope="col">Strength</th>
              <th scope="col">Speed</th>
              <th scope="col">Durability</th>
              <th scope="col">Power</th>
              <th scope="col">Combat</th>
              <th scope="col">Ekip</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
          <form id="checks" action="/check_heroes", method="post">
            {% for hero in heroes %}
              <tr>
                <th style="vertical-align: middle" scope="row">{{hero.name}}</th>
                <td style="vertical-align: middle" >
                  <img style="width: 60px;" src="{{hero.image_url}}" alt="hero_image">
                </td>
                <td style="vertical-align: middle" ><div class="bg-gradient" style="background-color: {{ interpolate_color('a8c0d6', '294157', hero.intelligence/ 100) }}; display: inline-block; padding: 10px; border-radius: 10px; color: white;">{{hero.intelligence}}</div></td>
                <td style="vertical-align: middle" ><div class="bg-gradient" style="background-color: {{ interpolate_color('a8c0d6', '294157', hero.strength/ 100) }}; display: inline-block; padding: 10px; border-radius: 10px; color: white;">{{hero.strength}}</div></td>
                <td style="vertical-align: middle" ><div class="bg-gradient" style="background-color: {{ interpolate_color('a8c0d6', '294157', hero.speed/ 100) }}; display: inline-block; padding: 10px; border-radius: 10px; color: white;">{{hero.speed}}</div></td>
                <td style="vertical-align: middle" ><div class="bg-gradient" style="background-color: {{ interpolate_color('a8c0d6', '294157', hero.durability/ 100) }}; display: inline-block; padding: 10px; border-radius: 10px; color: white;">{{hero.durability}}</div></td>
                <td style="vertical-align: middle" ><div class="bg-gradient" style="background-color: {{ interpolate_color('a8c0d6', '294157', hero.power/ 100) }}; display: inline-block; padding: 10px; border-radius: 10px; color: white;">{{hero.power}}</div></td>
                <td style="vertical-align: middle" ><div class="bg-gradient" style="background-color: {{ interpolate_color('a8c0d6', '294157', hero.combat/ 100) }}; display: inline-block; padding: 10px; border-radius: 10px; color: white;">{{hero.combat}}</div></td>
                <td style="vertical-align: middle" >
                  <input name="checklist" type="checkbox" class="btn-check" value="{{hero.hero_id}}" id="btn-check-outlined{{hero.hero_id}}" autocomplete="off">
                  <label class="btn btn-outline-primary" for="btn-check-outlined{{hero.hero_id}}">Savaşa Ekle</label><br>
                </td>
              </tr>
              {% endfor %}
            </form>
          </tbody>
        </table>

      {% endif %}
    </div>

    <div class="col-1">
    </div>
  </div>
  <br />
</div>


<script>
  const checkboxes = document.querySelectorAll('.btn-check'); // Tüm checkboxları seç

  checkboxes.forEach(checkbox => {
      checkbox.addEventListener('change', () => {
          const checkedCheckboxes = document.querySelectorAll('.btn-check:checked'); // Seçilen checkboxları say
          const showButton = document.getElementById('showButton'); // Farklı butonu seç

          if (checkedCheckboxes.length == 5) {
              showButton.style.display = 'block'; // Eğer 5 adet seçildiyse butonu göster
              window.scrollTo(0, 0); // Sayfanın en üstüne kaydır

          } else {
              showButton.style.display = 'none'; // Değilse gizle
          }
      });
  });


    document.getElementById("showButton").addEventListener("click", function() {
      document.getElementById("checks").submit();
  });



</script>


{% endblock body %}
